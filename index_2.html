<script>
    // Configura automáticamente la fecha al próximo martes o jueves
    function getNextTuesdayOrThursday() {
        const today = new Date();
        const day = today.getDay(); // 0 = Domingo, 1 = Lunes, ..., 6 = Sábado
        let daysToAdd;

        if (day <= 2) {
            daysToAdd = 2 - day; // Martes más cercano
        } else if (day <= 4) {
            daysToAdd = 4 - day; // Jueves más cercano
        } else {
            daysToAdd = (day === 5 || day === 6) ? 8 - day : 2; // Próximo martes
        }

        const nextDate = new Date();
        nextDate.setDate(today.getDate() + daysToAdd);
        return nextDate.toISOString().split('T')[0]; // Formato YYYY-MM-DD
    }

    // Establecer la fecha predeterminada
    document.getElementById('date').value = getNextTuesdayOrThursday();

    // Lista de mensajes aleatorios
    const randomMessages = [
        "Momento, Susi está haciendo 112 reservas",
        "Aguarde, Beto se está cambiando la peluca",
        "Espere, Flor está charlando",
        "ALBERTOOOO",
        "No desespere, Facu está preparando brownie",
        "Para pensar: Mejor jugar al tenis, el rafting es una cagada", 
        "Reflexiones: No siempre guascazo es lo que uno cree", 
        "Cuyo News: Posho y poio son lo mismo", 
        "De BsAs con amor: Los cuernitos son mejores que las tortitas", 
        "Meli, bajá el volumen de tu música", 
        "Espere por favor, a la Gi le duele el hombro"
    ];

    // Función para obtener un mensaje aleatorio sin repetir
    function getUniqueRandomMessages(messages, count) {
        const shuffled = [...messages].sort(() => 0.5 - Math.random());
        return shuffled.slice(0, count);
    }

    // Capturamos el formulario y evitamos su envío predeterminado
    document.getElementById('reservation-form').addEventListener('submit', function(event) {
        event.preventDefault();

        // Obtener valores del formulario
        const name = document.getElementById('name').value;
        const date = document.getElementById('date').value;
        const time = document.getElementById('time').value;

        // Validar campos
        if (!name || !date || !time) {
            alert("Por favor completa todos los campos.");
            return;
        }

        // Obtener dos mensajes únicos aleatorios
        const uniqueMessages = getUniqueRandomMessages(randomMessages, 2);

        // Construir el mensaje de WhatsApp
        const whatsappMessage = `
Reserva confirmada:
- Nombre: ${name}
- Fecha: ${date}
- Hora: ${time}

Frases del día:
1. ${uniqueMessages[0]}
2. ${uniqueMessages[1]}
        `.trim();

        // URL de WhatsApp (para mensaje predefinido)
        const whatsappURL = `https://api.whatsapp.com/send?text=${encodeURIComponent(whatsappMessage)}`;

        // Mostrar los mensajes de confirmación
        uniqueMessages.forEach(message => alert(message));
        alert("Reserva finalmente realizada");

        // Abrir el enlace de WhatsApp
        window.open(whatsappURL, '_blank');
    });
</script>
